# Sender Policy Framework (SPF)
A SPF record is a type of DNS record that can help prevent an email address from being forged. This record is established to identify the hostnames or IP addresses that are allowed to send emails for your custom domain. When having a SPF record specified on your domain, helps prevent a malicious actor from spoofing your domain. The SPF TXT record contains three parts
- Declaration: of the record type
- IP addresses
- External domains; that can send yon your domains behalf.

# Domain Keys Identified Mail (DKIM)
DKIM is a method of email authentication that cryptographically verifies if an email has been sent by its trusted servers and hasn't been tampered with during transmission. The way that DKIM works, when the mail server sends an email, an encrypted hash of the email contents is generated using a private key and then it adds this hash to the email header as a DKIM signature. THe receiving server will be able to verify whether the email contents have not been tampered with by  looking up the corresponding public key in the domains DNS records. Once the receiving mail server decypts the email with the public key, it calculates a new hash and verifies whether the orignial and the newly generated hash match to ensure email message integrity. 

# Domain-based Message Authentication, Reporting & Confromance(DMARC)
DMARC is an email authentication, policy, and reporting protocol. DMARC is built largely off of concepts taken from SPF and DKIM, but it addsd several improvements to those protocols. This type of record allows the domain owner to specify what should happen if emails fail both SPF andDKIM checks. There are three basic options that the mail server can take:
- None
- Quarantine
- Reject



# SPAM Filter
SPAM filters where created with the end user in mind. 

Types of SPAM filters
1) Gateway: One that sits abehind an on-premises network firewall. These can often be utilized by larger enterprise organizations.
2) Hosted: Hosted in a cloud. This works similar to the gateway spam filters but are able to update more quickly than some of the on-premises filterse.
3) Desktop: are user installed and are typically used in SOHO scenarios. One major drawback of these kinds of filters is that they can sometimes be categorized as Freeware.


# SPAM filter Classification
**Content Filters**
Uses information in the email header and nody to try to determine whether the email is legitimate or spam. When looking at the header, the filter could cross-reference the header with publisehd blacklists or known spamming networks and automatiaclly classify it as SPAM. 

**Rule-Based Filters**
A rule based filter allows for emails to be filtered based on predetermined criteria. 

**Bayesian Filters**
Bayesian filters have become on e the most intelligent types of spam filters that can be used. It uses machine learning to learthe users spam preferences. EX. When the user marks an email as spam, it can analyze the characteristics of that message and use that informatino to block similar messages from going to the inbox. 

These are the three most common filters. 


# Attachment Filtering
Its a good idea to block attachments outright, common file types that are used for malicious activity are: 
- exe
- vbs (Visual Basic)
- js
- iso (Optical Disk Image)
- bat
- ps/ps1 (Powershell)
- htm/html

Typically  businesses will use and send the following file formats via email, which can also be sued for malicious pruposes
- zip
- doc
- pdf
- xls

Email gateway and email security tools will offten allow for different actions to be taken once a certain attachment has been identified, such as scanning it for malicious indicators, blocking the email from being delivered quaranting the email, stripping the attachment, alerting the email gateway administrator, sending an email to specific recipients about the activey or generating logs wich can be ingested by a SIEM platform and used to generrate an alert for security analysts. 


# Immediate Response Process
1) Retrieve an original copy of the phishing email


2) Gather artifacts from the phishing email


3) Inform the recipients that received the email
This helps reduce the chance of them opening an interacting with the email. The email would contain the following
- Date and Time the email was sent
- Subject line
- Clear instruction on what to do with the email
- Contact details if the recipient is unsure what to do. 

4) Investigate malicious artifacts to collect indicators of compromise that can be blocked to protect the organization


5) Take defensive measures
Are action taken by the security team  to reduce the risk generated by the phishing attack. This could include blocking emails, web, and file-based artifacts. 

6) Complete the investigation report, documenting all of the above steps.

# BLocking email artifacts
Once the artifacts are collected and analyzed, you can take defensive measures in order to block incoming and outgoing emails that feature these artifacts. Email artifacts
- Email sender
If a large volume is bening sned from the same sender, you can block the sender on the email gateway, preventing more emails from coming in. 

- Sender domain
the step up from blocking the sending address is to block the entire sending domain. When receiving emails from @outlook or @gmail, it's obviosly not feasible to block these entire domains, as there is large potenail of blocking legitimate emails. 
  
- Sending server IP
This is a very serious block and is not conducteed unless it is absolutley necessary. THis will drop any emails coming form the specified IP.

- Subject line
Phishing attackes will typically use on subject line, otherwise the attackers need to keep modifying it, creating more work. 












